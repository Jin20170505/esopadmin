<%
layout("/include/_container.html", {title:"打印", parent:"报工单"}){
%>
<style type="text/css">
    @media print {
        #print{
            display: none;
        }
    }
    #print{
        width: 100px;
        position: absolute;
        top: 10px;
        left: 10px;
    }
    #qrcode{
        display: block;
        width: 140px;
        height: 140px;
    }
</style>
<div class="white-box">
    <a id="print" class="btn btn-custom waves-effect w-xs waves-light" onclick="window.print();">
        <i class="fa fa-print"></i> 打印
    </a>

    <h3 style="text-align: center;">报工单</h3>
    <table class="table table-bordered">
        <tbody>
        <tr>
            <th>报工单号</th>
            <td>${order.ordercode!}</td>
            <th>生产订单号</th>
            <td>${order.ordercode!}</td>
            <th>行号</th>
            <td>${order.orderline!}</td>
        </tr>
        <tr>
            <th>存货编码</th>
            <td>${order.cinvcode!}</td>
            <th>存货名称</th>
            <td colspan="3">${order.cinvname!}</td>
        </tr>
        <tr>
            <th>工单数量</th>
            <td>${order.num!}</td>
            <th>计量单位</th>
            <td>${order.unit!}</td>
            <td colspan="3" rowspan="4"><img id="qrcode" src="${ctx}/business/baogong/order/businessBaoGongOrder/img/${order.id!}"/></td>
        </tr>
        <tr>
            <th>开始日期</th>
            <td>${order.startdate!}</td>
            <th>结束日期</th>
            <td>${order.enddate!}</td>
        </tr>
        <tr>
            <th>生产部门</th>
            <td>${order.deptName!}</td>
            <th>生产批号</th>
            <td>${order.batchno!}</td>
        </tr>
        <tr>
            <th>备注</th>
            <td colspan="3">${order.remarks!}</td>
        </tr>
        </tbody>
    </table>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>序号</th>
                <th>工序名称</th>
                <th>工号</th>
                <th>姓名</th>
                <th>备注</th>
            </tr>
        </thead>
        <tbody id="itemList">

        </tbody>
    </table>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        var data = ${fn.toJson(order.businessBaoGongOrderMingXiList)};
        var htm = '';
        for (var i=0; i<data.length; i++){
            htm +=  `<tr>
                        <td>`+data[i].no+`</td>
                        <td>`+data[i].site+`</td>
                        <td>`+data[i].opcode+`</td>
                        <td>`+data[i].opname+`</td>
                        <td></td>
                    </tr>`;
        }
        $('#itemList').html(htm);
    });
</script>
<% } %>